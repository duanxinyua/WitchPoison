# 女巫的毒药 🧙‍♀️

> 游戏规则说明  
> 日期：2025-07-18  

---

## 🎮 游戏简介

"女巫的毒药"是一款基于回合制的心理博弈类小游戏，支持2-5人在线对战。每位玩家需要在一片神秘网格中秘密放置毒药，并通过轮流翻格子的方式寻找安全区域，翻到毒药则被判定失败。

---

## 📐 游戏场地

- 默认格子大小为 **5x5**
- 可由创建房间的玩家（房主）自定义格子大小（5x5 到 10x10）和游戏人数（2-5人）

---

## 👥 玩家人数

- 支持 **2-5人** 的对战模式
- 多人参与时，**仅剩一人未中毒**即视为胜利

---

## 🔁 游戏流程

### 1. 放置毒药
- 每位玩家在格子中**秘密放置**一枚毒药
- 所放位置对其他玩家**不可见**

### 2. 轮流翻格子
- 玩家依次选择尚未翻开的格子进行探索
- 翻开后显示该格子是否安全或含毒药

### 3. 游戏结束
- 若翻开**任意毒药**（包括自己的），即视为被毒，游戏结束
- **最后幸存的玩家获胜**

---

## ⚠️ 游戏要点

- 玩家**不能翻开已翻开的格子**
- 理论上玩家不应翻到自己的毒药（除非失误）
- 游戏流程依赖回合顺序进行操作
- 当前版本**不支持观战或回放功能**

---

## 🧩 技术架构说明

| 层级 | 技术栈             |
|------|--------------------|
| 前端 | UniApp + Vue 3     |
| 后端 | Node.js + Express + WebSocket（内存存储） |
| 部署 | 宝塔面板 + Nginx（含 SSL / 反代） |

---

## 🚀 开发运行

### 前端开发
```bash
cd poison-game
npm install
npm run dev:mp-weixin    # 微信小程序开发
npm run build:mp-weixin  # 微信小程序构建
```

### 后端开发
```bash
cd poison-game-backend
npm install
npm start               # 启动服务器(端口3000)
```

---

## 📅 更新记录

### v1.1.0 (2025-07-19)

#### 🎨 UI体验优化
- **个性化设置界面**：重新设计表单布局，优化对齐和响应式设计
- **用户信息显示**：调整头像位置至名称右侧，实现居中对齐，缩小个性化按钮
- **表单组件**：统一按钮样式、间距和交互效果，增强视觉层次感

#### 🔧 核心功能修复  
- **TypeError dirty错误**：修复GameGrid组件中的Vue数据绑定问题，添加安全检查和异常处理
- **默认用户信息**：优化昵称和头像保存逻辑，首次进入自动生成并持久化，避免重复刷新

#### 🚀 用户体验提升
- **WeChat合规**：实现游客模式，允许用户先体验游戏再设置个人信息
- **数据持久化**：确保用户信息在页面切换间保持一致，提升使用连续性
- **响应式设计**：优化小屏幕显示效果，确保各设备兼容性

#### 🛠️ 技术改进
- **组件生命周期**：优化Vue组件挂载和数据更新机制
- **异常处理**：增强错误捕获和用户友好的提示信息
- **代码质量**：统一代码风格，提升可维护性

### v1.0.0 (2025-07-18)
- **项目文档**：完善项目文档，添加开发运行说明
- **技术架构**：更新技术架构描述，明确Vue 3和Express框架
- **规范说明**：规范玩家人数和棋盘大小限制说明
- **开发指南**：添加前后端开发命令指南

### v0.1.0 (2025-06-12)
- **项目初始化**：编写并确认游戏规则，初始化开发框架结构（UniApp + WebSocket）

---

